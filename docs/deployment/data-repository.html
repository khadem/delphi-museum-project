<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type" /><title>Delphi - Deployment - Data Repository</title>

<link rel="stylesheet" type="text/css" href="../stylesheets/delphi-docs.css" />
<!--
Last committed revision:
$Author: aronroberts $
$Date: 2008-11-03 16:55:46 -0800 (Mon, 03 Nov 2008) $
$Revision: 386 $
-->
</head>
<body>
<p class="linkback right"><a href="introduction.html">Back
to Introduction</a></p>
<h1>Deploying Delphi: Data Repository</h1>
<div class="draftnote">
<p>This is a draft page, in ongoing development. It is still
rough, but we are exposing it to the community
for review and to help anyone considering a Delphi deployment. We are
actively updating all of the documentation, so it is best to use this
resource online, rather than printing out a version.</p>
</div>
<p>
This is an overview of the <span style="font-weight: bold;">data
repository</span> in Delphi, an
open source
software system that helps open up access via the Web to collections of
artifacts held by museums, historical societies, archeological
repositories and similar heritage institutions. &nbsp;Delphi uses
artificial intelligence and natural language processing to
make it more effective and enjoyable to find individual artifacts in
collections, and to uncover relationships between artifacts, than is
possible through traditional searching and browsing.
</p>
<h2>Types of data stored in the repository<br />
</h2>
The data repository stores two types of data:
<ul>
<li>Data about
artifacts in the collections ("metadata").<br />
<br />
<span style="font-style: italic;">Purposes of this data</span>:
&nbsp;This data is displayed when the Delphi collections browser
provides details about individual artifacts.<br />
<br />
Moreover, this data is "mined," via natural language processing, to
help build a set of concepts that more fully describe the collections
and to associate those concepts with each of the individual
artifacts in the collections. &nbsp;That allows the collections to
be searched and browsed by concepts.<br />
<br />
<span style="font-style: italic;">Source of this data</span>:
&nbsp;In the instance of Delphi used by PAHMA, data about the
artifacts in its collections ("metadata") comes
directly from that museum. &nbsp;The current format of this data is
in the form of "dump files," text files with comma-separated values.
&nbsp;These text files are generated from a selected set of
database tables that are used by the museum's collections management
system.<br />
<br />
Future instances of Delphi deployed elsewhere will also obtain
this metadata from their own museums or heritage
institutions. &nbsp;In any such instances, the format of this
metadata will be unique to the institution, depending both on how any
specific institution organizes the metadata about its collections, and
on the collections management system it uses to store
that data.<br />
<br />
As a result, the code and/or configuration of Delphi's back-end tools,
which load this metadata into the data repository, will need to be
customized for each instance. &nbsp;However, the database schemas
used to store this metadata in Delphi are relatively generic, and as
such either might
not need to be changed, or may require only minor customization.<span class="comment highlight"> &nbsp;Verify this last
assertion. &nbsp;Would this apply if Delphi were used for an art
museum, for
instance? &nbsp;Also, consider moving this paragraph elsewhere;
this may not be its most appropriate location.</span><br />
<br />
</li>
<li>Data about the concepts associated with these artifacts (a
"semantic index").<br />
<br />
<span style="font-style: italic;">Purpose of this data</span>:
&nbsp;This data helps users of Delphi's collections browser locate
artifacts by concepts, and help uncover relationships between artifacts.<br />
<br />
<span style="font-style: italic;">Source of this data</span>:
This data is generated by Delphi's back-end tools, based on the
data provided by the museum, and then loaded into the repository by
those tools. &nbsp;
To learn more about these tools, see <a href="back-end-tools.html">Deploying
Delphi: Back-end Tools</a>.<br />
<br />
Future instances of
Delphi deployed elsewhere will need to build their own mental models
("ontologies") of their data facets and concepts.<br />
</li>
</ul>
<h2>Components</h2>
The data repository currently consists of the following components:<br />
<h3><strong>1. MySQL</strong></h3>
<p>The data repository for the instance of Delphi currently used
by PAHMA
is MySQL, an open source relational database management system (RDBMS).
&nbsp;MySQL is available in two flavors: MySQL Community Server
(free), the version used for Delphi; and MySQL Enterprise (commercial,
packaged with an enhanced set
of support services).<span class="comment highlight"><br />
</span><br />
<em>Obtained from</em>: <a href="http://www.mysql.com/" target="_blank">http://www.mysql.com/</a></p>
<p><em>Latest version (stable)</em>: 5.0.67</p>
<p><span class="comment highlight">Add details about
licensing, etc. here.</span></p>
<p><em></em>Delphi can also potentially use other
relational
database software in place of MySQL. &nbsp;This is because Delphi's
PHP-based code makes generic database calls via a PHP library,
Pear::MDB2, that supports a number of different types of databases.<br />
<br />
The Delphi team had considered other types of
data repositories, such as a "triple store" that is optimized for
storing
and retrieving semantic data represented via the Resource Description
Framework (RDF), but chose a relational database primarily on the basis
of
performance. &nbsp;That choice might be revisited at a future time,
if and when the performance of triple store repositories significantly
improves.<br />
</p>
<h4>MySQL on the IST Unix Web Farm</h4>
<p>In Delphi instance for PAHMA at UC Berkeley, MySQL is provided
by the IST Database team, as an extra-cost
option to the IST Unix Web Farm hosting environment.</p>
<p>Delphi uses the MySQL Basic service, which "is appropriate
for projects which have no restricted data, modest storage
requirements,
and no complex database design issues. It includes a single production
environment with limited support." &nbsp;For more information
regarding this service,&nbsp; see
<a href="http://ist.berkeley.edu/services/catalog/database/mysql" target="_blank">http://ist.berkeley.edu/services/catalog/database/mysql</a>
&nbsp;There are also other MySQL services available from the IST Database team which offer
more support, at a higher cost.&nbsp;
</p><p>In the three-tier model of the IST
Unix Web Farm, it is
possible to have separate instances of databases, such as MySQL
databases, available to each of the tiers.&nbsp; This way,
development and quality assurance work that changes database contents
can be carried out without affecting the production database.
&nbsp;In the current instance of Delphi on the Web Farm, there are
two
instances of MySQL: one shared by the development and quality assurance
environments - since it was determined there was no compelling reason
to have separate database instances for those two tiers - and another
specific to the production environment.<br />
</p>
<span class="comment highlight">Add details about the Web
Farm tiers here, including </span><span class="comment highlight">how the PHP
environment is configured to point to specific MySQL database
instances across these tiers</span><span class="comment highlight">.<br /></span><p><em>Installed version in Delphia's PAHMA instance:</em>
&nbsp;5.0.67<br />
(The installed version is selected and maintained by the
adminstrators
of the IST Unix
Web Farm. &nbsp;It was identified by running the 'mysql' utility from
the command line, with a set of parameters to connect to the instance
of MySQL provided by the MySQL Basic service: <code>mysql --host=<span style="font-style: italic;">hostname</span>
--port=<span style="font-style: italic;">port_number</span>
--database=<span style="font-style: italic;">database_name</span>
--user=<span style="font-style: italic;">user_name</span>
--password=<span style="font-style: italic;">password</span></code>,
with values for each of these parameters obtained from the
configuration file <code>config.php</code>.
&nbsp;After connecting and receiving the interactive <code>mysql&gt;</code>
prompt, the following SQL command identified the MySQL version: <code>SHOW
VARIABLES LIKE "%version%";</code>)</p>

<h3><strong>2. phpMyAdmin</strong></h3>
<p>phpMyAdmin is an open source administration console for MySQL.
&nbsp;It provides a web-based, graphical interface to managing
accounts, databases, and tables, and other MySQL components. &nbsp;phpMyAdmin is included as part of IST's MySQL Basic service.<br />
<br />
<span class="comment highlight">Add details about
versions, licensing, usage etc. here.<br />
</span></p>
<h3><strong>3. Image storage</strong></h3>
High-resolution images have been created for a portion of the
artifacts in the PAHMA collection, and are retrieved and displayed by
Delphi's collections browser. &nbsp;In the data repository for
the instance of Delphi currently used
by PAHMA, these images are stored on a Storage Area Network (SAN) in
the campus Data Center at UC Berkeley,
provided by Information Services and Technology (IST). &nbsp;The
Delphi
service is currently paying for 70
MB of SAN storage, and uses less than half of that storage, as of
2008-10-21.<br />
<br />
This SAN storage is mounted over the Data Center's network via the
Network File System (NFS) <span class="comment highlight">verify
this,</span>, and is
made available to Delphi's 'pahma' account on the IST Unix Web Farm
through a
Unix symbolic link:<span style="font-family: &quot;Courier New&quot;,Courier,monospace;"></span><code>
the webroot/delphi/objimages</code> directory within that account
is actually a symlink to the NFS-mounted area of SAN storage that is
provided at&nbsp; <code>/nas/pahma/objimages</code>.<br />
<br />
This SAN storage area is generally mounted read-only.
&nbsp;When it is necessary to add additional images, Delphi's
administrators make a request to the IST Unix Team to temporarily mount
this storage area as read-write.<br />
<br />
For
more details about the IST's storage services, including SAN storage
and network-accessible (NFS) access to that storage, see
<a href="http://ist.berkeley.edu/is/platforms/storage/san" target="_blank">http://ist.berkeley.edu/is/platforms/storage/san</a><br />
<br />
<h2>The structure of data stored in the repository: database
schemas<br />
</h2>
<p><span class="comment highlight">Discuss the
database schema -
look for load files in the source code tree, descriptive text, diagrams.</span></p>
<span class="comment highlight">All
tables created in MySQL using the .sql files in /trunk/schema currently use the
default MyISAM storage engine,
http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html
</span><br />
<span class="comment highlight"><br />
</span>
<h2>Related documentation</h2>
Delphi's data repository stores the data that is accessed by its
web-based collections
browser. &nbsp;To learn more about this collections browser, see <a href="collections-browser.html">Deploying Delphi:
Collections Browser</a>.<br />
<br />
Data is placed into this repository using a set of
back-end tools. &nbsp;
To learn more about these tools, see <a href="back-end-tools.html">Deploying
Delphi: Back-end Tools</a>.
<h2></h2>
</body></html>